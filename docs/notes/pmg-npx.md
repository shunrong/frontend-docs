---
nav:
  title: 笔记
  path: /notes
group:
  title: 中枢-工程化
  order: 2
type:
  title: 包管理器
  order: 1
title: npx 是什么？
---

# npx 是什么？

> 详细讲解下 npx，讲清楚它出现之前是什么现状，遇到了什么问题。有了它之后带来了什么好处，具体用法和场景是怎样的？

npx 是 Node.js 生态系统中的一个命令行工具，它与 npm（Node Package Manager）紧密相关。npx 的出现解决了一些开发者在使用 npm 时遇到的常见问题，并带来了许多便利。

## 出现之前的现状

在 npx 出现之前，开发者通常会遇到以下问题：

1. **全局安装问题**：为了使用某些命令行工具，开发者需要全局安装这些工具。这可能导致版本冲突，因为不同项目可能需要不同版本的同一工具。

2. **本地安装的复杂性**：虽然可以在项目中本地安装工具，但要在命令行中使用这些工具，需要指定完整的路径（例如 `./node_modules/.bin/`），这很不方便。

3. **依赖管理**：全局安装的工具不容易被项目的依赖管理系统（如 npm）追踪，这可能导致项目在不同环境中运行不一致。

## npx 带来的好处

npx 解决了上述问题，带来了以下好处：

1. **临时使用工具**：npx 允许开发者在不安装工具的情况下直接运行命令。这对于只需要一次性使用的工具非常有用。

2. **自动使用本地安装的工具**：npx 会优先使用项目中本地安装的工具，而不是全局安装的版本。这确保了项目的一致性。

3. **简化命令**：使用 npx 可以避免输入冗长的路径，直接运行命令行工具。

4. **版本管理**：npx 可以指定特定版本的工具来运行，避免了版本冲突。

## 具体用法和场景

1. **运行本地安装的工具**：
   如果你在项目中本地安装了一个工具，比如 `webpack`，可以直接使用：
   ```bash
   npx webpack
   ```

2. **运行未安装的工具**：
   你可以直接运行未安装的工具，比如：
   ```bash
   npx create-react-app my-app
   ```
   这会临时下载并运行 `create-react-app`。

3. **指定版本运行**：
   你可以指定工具的版本：
   ```bash
   npx webpack@4.0.0
   ```

4. **清理缓存**：
   npx 会缓存下载的工具，你可以通过以下命令清理缓存：
   ```bash
   npx cache clean
   ```

npx 的出现极大地简化了 Node.js 项目中命令行工具的使用，使得开发者可以更灵活地管理和使用这些工具。


## 运行本地命令

使用`npx 命令`时，它会首先从本地工程的`node_modules/.bin`目录中寻找是否有对应的命令

例如：

```shell
npx webpack
```

上面这条命令寻找本地工程的`node_modules/.bin/webpack`

如果将命令配置到`package.json`的`scripts`中，可以省略`npx`

### 临时下载执行

当执行某个命令时，如果无法从本地工程中找到对应命令，则会把命令对应的包下载到一个临时目录，下载完成后执行，临时目录中的命令会在适当的时候删除

例如：

```shell
npx prettyjson 1.json
```

npx会下载`prettyjson`包到临时目录，然后运行该命令

如果命令名称和需要下载的包名不一致时，可以手动指定报名

例如`@vue/cli`是包名，`vue`是命令名，两者不一致，可以使用下面的命令

```shell
npx -p @vue/cli vue create vue-app
```

## npm init

`npm init`通常用于初始化工程的`package.json`文件

除此之外，有时也可以充当`npx`的作用

```shell
npm init 包名 # 等效于 npx create-包名
npm init @命名空间 # 等效于 npx @命名空间/create
npm init @命名空间/包名 # 等效于 npx @命名空间/create-包名
```



