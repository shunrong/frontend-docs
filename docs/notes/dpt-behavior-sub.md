---
nav:
  title: 笔记
  path: /notes
group:
  title: 中枢-工程化
  order: 2
type:
  title: 设计模式
  order: 5
title: 发布订阅模式
order: 22
---

# 发布订阅模式

发布订阅模式可以看作是观察者模式的一种升级版本，和观察者模式在结构上比较相似，但是它们在进行消息传递的时候，传递方式会有所不同。

- 两种模式的区别
- 具体的代码实现



## 两种模式的区别

### 观察者模式

- **直接通信**：在观察者模式中，观察者（Observer）直接订阅主体（Subject）。当主体发生改变时，它直接通知这些观察者。
- **双向依赖**：观察者需要知道主体，主体需要维护一个观察者列表。
- **主体状态**：观察者通常对主体的状态变化感兴趣，它们可能会从主体中检索状态。
- **实例**：很多GUI工具使用观察者模式，例如，一个按钮（主体）可以有多个事件监听器（观察者）。

观察者模式更多用于单一应用程序中对象间的通信，其中观察者通常对主体的状态和状态变化感兴趣。



### 发布订阅模式

- **间接通信**：发布-订阅模式使用一个称作代理（Broker）或消息中介（Message Queue）的第三方组件，发布者（Publisher）不直接发送消息给订阅者（Subscriber），而是通过消息中介。
- **解耦**：发布者和订阅者不需要知道对方的存在。它们只需要知道相关的消息或事件类型。
- **异步通信**：通常发布-订阅模式支持异步处理，订阅者可以在未来的任何时间点处理收到的消息。
- **动态关系**：订阅者可以根据需要随时订阅或取消订阅消息。
- **实例**：消息队列（如 RabbitMQ）、流处理（如 Kafka）和许多现代应用框架使用发布-订阅模式。

发布-订阅模式通常用于大型、分布式系统中，以消息中介来解耦发布者和订阅者。

两者虽然在概念上相似，但在实现细节和使用上有明显区别，选择哪一个取决于你的应用场景和需求。



## 具体的代码实现

参阅随堂课堂代码。

